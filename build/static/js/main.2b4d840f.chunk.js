(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{20:function(t,e,n){"use strict";n.r(e),n.d(e,"register",(function(){return d})),n.d(e,"logIn",(function(){return j})),n.d(e,"logOut",(function(){return b})),n.d(e,"fetchCurrentUser",(function(){return f}));var r=n(22),c=n.n(r),a=n(35),u=n(25),o=n.n(u),s=n(4);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){o.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){o.a.defaults.headers.common.Authorization=""},d=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:return a=t.sent,u=a.data,i(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.response.data));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:return a=t.sent,u=a.data,i(u.token),t.abrupt("return",u);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.response.data));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(s.c)("auth/logout",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,o.a.post("/users/logout");case 4:l(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.response.data));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return i(a),t.prev=5,t.next=8,o.a.get("/users/current");case 8:return u=t.sent,s=u.data,t.abrupt("return",s);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue());case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:d,logIn:j,logOut:b,fetchCurrentUser:f};e.default=h},32:function(t,e,n){t.exports={nav:"Navigation_nav__270DS",link:"Navigation_link__1gOvq",activeLink:"Navigation_activeLink__Mp-Pq"}},38:function(t,e,n){t.exports={link:"AuthNav_link__2UIJS",activeLink:"AuthNav_activeLink__1ZFgu"}},45:function(t,e,n){t.exports={container:"UserMenu_container__3dYTf",avatar:"UserMenu_avatar__1y2Bt",name:"UserMenu_name__35h4H"}},62:function(t,e,n){t.exports={container:"Container_container__2jFI7"}},63:function(t,e,n){t.exports={header:"AppBar_header__37-8C"}},8:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContactsRequest",(function(){return c})),n.d(e,"fetchContactsSuccess",(function(){return a})),n.d(e,"fetchContactsError",(function(){return u})),n.d(e,"addContactRequest",(function(){return o})),n.d(e,"addContactSuccess",(function(){return s})),n.d(e,"addContactError",(function(){return i})),n.d(e,"deleteContactRequest",(function(){return l})),n.d(e,"deleteContactSuccess",(function(){return d})),n.d(e,"deleteContactError",(function(){return j})),n.d(e,"filterContact",(function(){return b}));var r=n(4),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),o=Object(r.b)("contacts/addContactRequest"),s=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),l=Object(r.b)("contacts/deleteContactRequest"),d=Object(r.b)("contacts/deleteContactSuccess"),j=Object(r.b)("contacts/deleteContactError"),b=Object(r.b)("contacts/filter")},97:function(t,e,n){},98:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getLogIn",(function(){return A})),n.d(r,"getUserName",(function(){return W})),n.d(r,"getIsFetchingCurrentUser",(function(){return M}));var c,a,u,o,s=n(0),i=n.n(s),l=n(24),d=n.n(l),j=n(19),b=n(10),f=n(60),h=n(43),O=n(4),p=n(23),v=n(61),g=n.n(v),x=n(3),C=n(12),m=n(8),k=Object(O.d)([],(c={},Object(x.a)(c,m.fetchContactsSuccess,(function(t,e){return e.payload})),Object(x.a)(c,m.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(h.a)(t),[n])})),Object(x.a)(c,m.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),_=Object(O.d)("",Object(x.a)({},m.filterContact,(function(t,e){return e.payload}))),y=Object(O.d)(!1,(a={},Object(x.a)(a,m.fetchContactsRequest,(function(){return!0})),Object(x.a)(a,m.fetchContactsSuccess,(function(){return!1})),Object(x.a)(a,m.fetchContactsError,(function(){return!1})),Object(x.a)(a,m.addContactRequest,(function(){return!0})),Object(x.a)(a,m.addContactSuccess,(function(){return!1})),Object(x.a)(a,m.addContactError,(function(){return!1})),Object(x.a)(a,m.deleteContactRequest,(function(){return!0})),Object(x.a)(a,m.deleteContactSuccess,(function(){return!1})),Object(x.a)(a,m.deleteContactError,(function(){return!1})),a)),L=Object(O.d)(null,(u={},Object(x.a)(u,m.fetchContactsError,(function(t,e){return e.payload})),Object(x.a)(u,m.addContactError,(function(t,e){return e.payload})),Object(x.a)(u,m.deleteContactError,(function(t,e){return e.payload})),Object(x.a)(u,m.fetchContactsRequest,(function(){return null})),Object(x.a)(u,m.addContactRequest,(function(){return null})),Object(x.a)(u,m.deleteContactRequest,(function(){return null})),u)),N=Object(C.b)({items:k,filter:_,isLoading:y,error:L}),S=n(20),U=Object(O.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(o={},Object(x.a)(o,S.default.register.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(x.a)(o,S.default.logIn.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(x.a)(o,S.default.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(x.a)(o,S.default.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(x.a)(o,S.default.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(x.a)(o,S.default.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),o)}).reducer,w=Object(h.a)(Object(O.f)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),q={key:"auth",storage:g.a,whitelist:["token"]},E=Object(O.a)({reducer:{auth:Object(p.g)(q,U),contacts:N},middleware:w,devTools:!1}),I=Object(p.h)(E),R=n(62),F=n.n(R),T=n(2);var z=function(t){var e=t.children;return Object(T.jsx)("div",{className:F.a.container,children:e})},A=function(t){return t.auth.isLoggedIn},W=function(t){return t.auth.user.name},M=function(t){return t.auth.isFetchingCurrentUser},V=n(32),B=n.n(V);var J=function(){var t=Object(b.c)(A);return Object(T.jsx)("header",{className:B.a.nav,children:Object(T.jsxs)("div",{children:[Object(T.jsx)(j.c,{to:"/",exact:!0,className:B.a.link,activeClassName:B.a.activeLink,children:"Home"}),t&&Object(T.jsx)(j.c,{to:"/contacts",className:B.a.link,activeClassName:B.a.activeLink,children:"Contacts"})]})})},D=n(115),H=n.p+"static/media/avatar2.18e04990.png",P=n(45),Y=n.n(P);function Z(){var t=Object(b.c)(r.getUserName),e=Object(b.b)();return Object(T.jsxs)("div",{className:Y.a.container,children:[Object(T.jsx)("img",{src:H,alt:"Default Avatar",width:"32",className:Y.a.avatar}),Object(T.jsxs)("span",{className:Y.a.name,children:["Welcome, ",t]}),Object(T.jsx)(D.a,{color:"secondary",variant:"outlined",type:"button",onClick:function(){return e(S.logOut())},children:"Log out"})]})}var G=n(38),K=n.n(G),Q=function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)(j.c,{to:"/register",exact:!0,className:K.a.link,activeClassName:K.a.activeLink,children:"Sign up"}),Object(T.jsx)(j.c,{to:"/login",exact:!0,className:K.a.link,activeClassName:K.a.activeLink,children:"Log in"})]})},X=n(63),$=n.n(X);function tt(){var t=Object(b.c)(A);return Object(T.jsxs)("header",{className:$.a.header,children:[Object(T.jsx)(J,{}),t?Object(T.jsx)(Z,{}):Object(T.jsx)(Q,{})]})}var et=n(6),nt=n(31),rt=n(44),ct=["children","restricted","redirectTo"];function at(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,u=Object(rt.a)(t,ct),o=Object(b.c)(A)&&r;return Object(T.jsx)(et.b,Object(nt.a)(Object(nt.a)({},u),{},{children:o?Object(T.jsx)(et.a,{to:a}):e}))}var ut=["children","redirectTo"];function ot(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(rt.a)(t,ut),a=Object(b.c)(A);return Object(T.jsx)(et.b,Object(nt.a)(Object(nt.a)({},c),{},{children:a?e:Object(T.jsx)(et.a,{to:r})}))}var st=Object(s.lazy)((function(){return n.e(7).then(n.bind(null,134))})),it=Object(s.lazy)((function(){return n.e(5).then(n.bind(null,135))})),lt=Object(s.lazy)((function(){return n.e(4).then(n.bind(null,136))})),dt=Object(s.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,137))}));var jt=function(){var t=Object(b.b)(),e=Object(b.c)(M);return Object(s.useEffect)((function(){t(S.default.fetchCurrentUser())}),[t]),Object(T.jsx)(z,{children:e?Object(T.jsx)("h1",{children:"Loading.."}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(tt,{}),Object(T.jsx)(et.d,{children:Object(T.jsxs)(s.Suspense,{fallback:Object(T.jsx)("p",{children:"Loading..."}),children:[Object(T.jsx)(at,{path:"/",exact:!0,children:Object(T.jsx)(st,{})}),Object(T.jsx)(at,{path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(T.jsx)(it,{})}),Object(T.jsx)(at,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(T.jsx)(lt,{})}),Object(T.jsx)(ot,{path:"/contacts",redirectTo:"/login",children:Object(T.jsx)(dt,{})})]})})]})})};n(97);d.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(b.a,{store:E,children:Object(T.jsx)(f.a,{loading:null,persistor:I,children:Object(T.jsx)(j.a,{children:Object(T.jsx)(jt,{})})})})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.2b4d840f.chunk.js.map